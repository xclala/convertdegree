<!DOCTYPE html>
<html>

<head>
	<meta charset='UTF-8'>
	<title>单位转换器</title>
	<meta name="description" content="单位转换器">
	<meta name="author" content="邢栋">
	<link rel="icon" type="image/x-ico" href="icon192.jpeg">
</head>

<body>
	<a href="https://github.com/xclala/convertdegree">
		<img src="../github.svg">
	</a>
	<br>
	<p></p>
	<p></p>
	<a href="..">🔙<br></a>
	<h1>单位转换器</h1>
	<form align="center">
		<select id="selectoption" onchange="onselectoption()">
			<option value="temperture">温度</option>
			<option value="heavy">重量</option>
		</select>
		<p></p>
		<input id="x" onkeyup="convert_temperture('C')" placeholder="摄氏度" type="number">
		<label id="m1">°C</label>
		<p></p>
		<input id="y" onkeyup="convert_temperture('F')" placeholder="华氏度" type="number">
		<label id="m2">°F</label>
		<p></p>
		<input id="z" onkeyup="convert_temperture('K')" placeholder="开尔文" type="number">
		<label id="m3">K</label>
		<p></p>
		<div align="center"><button type="reset">清空</button></div>
		<script>
			function onselectoption() {
				let index = document.getElementById("selectoption").selectedIndex
				let selectedoption = document.getElementById("selectoption").options[index].value
				switch (selectedoption) {
					case "temperture":
						document.getElementById("x").onkeyup = function () { convert_temperture('C') }
						document.getElementById("x").placeholder = "摄氏度"
						document.getElementById("y").onkeyup = function () { convert_temperture('F') }
						document.getElementById("y").placeholder = "华氏度"
						document.getElementById("z").onkeyup = function () { convert_temperture('K') }
						document.getElementById("z").placeholder = "开尔文"
						document.getElementById("m1").innerHTML = "°C"
						document.getElementById("m2").innerHTML = "°F"
						document.getElementById("m3").innerHTML = "K"
						break
					case "heavy":
						document.getElementById("x").onkeyup = function () { convert_heavy('K') }
						document.getElementById("x").placeholder = "千克"
						document.getElementById("y").onkeyup = function () { convert_heavy('P') }
						document.getElementById("y").placeholder = "磅"
						document.getElementById("z").onkeyup = function () { convert_heavy('O') }
						document.getElementById("z").placeholder = "盎司"
						document.getElementById("m1").innerHTML = "千克"
						document.getElementById("m2").innerHTML = "磅"
						document.getElementById("m3").innerHTML = "盎司"
						break
				}
			}
			function convert_temperture(degree) {
				let temp1;
				let temp2;
				if (degree == "C") {
					temp1 = Math.abs(document.getElementById("x").value) * 9 / 5 + 32;
					temp2 = Math.abs(document.getElementById("x").value) + 273.15
					document.getElementById("y").value = Math.round(temp1 * 100) / 100;//四舍五入到百分位
					document.getElementById("z").value = Math.round(temp2 * 100) / 100;//四舍五入到百分位
				} else if (degree == "F") {
					temp1 = (Math.abs(document.getElementById("y").valu) - 32) * 5 / 9;
					temp2 = temp1 + 273.15;
					document.getElementById("x").value = Math.round(temp1 * 100) / 100;//四舍五入到百分位
					document.getElementById("z").value = Math.round(temp2 * 100) / 100;//四舍五入到百分位
				} else {
					temp1 = Math.abs(document.getElementById("z").value) - 273.15;
					temp2 = temp1 * 9 / 5 + 32;
					document.getElementById("x").value = Math.round(temp1 * 100) / 100;//四舍五入到百分位
					document.getElementById("y").value = Math.round(temp2 * 100) / 100;//四舍五入到百分位
				}
			}
			function convert_heavy(degree) {
				let temp1;
				let temp2;
				if (degree == "K") {
					temp1 = Math.abs(document.getElementById("x").value) * 2.204623;
					temp2 = temp1 * 16;
					document.getElementById("y").value = Math.round(temp1 * 100) / 100;//四舍五入到百分位
					document.getElementById("z").value = Math.round(temp2 * 100) / 100;//四舍五入到百分位
				} else if (degree == "P") {
					temp1 = Math.abs(document.getElementById("y").value) / 2.204623
					temp2 = Math.abs(document.getElementById("y").value) * 16
					document.getElementById("x").value = Math.round(temp1 * 100) / 100;//四舍五入到百分位
					document.getElementById("z").value = Math.round(temp2 * 100) / 100;//四舍五入到百分位
				} else {
					temp1 = Math.abs(document.getElementById("z").value) / 16 / 2.204623;
					temp2 = temp1 / 16
					document.getElementById("x").value = Math.round(temp1 * 100) / 100;//四舍五入到百分位
					document.getElementById("y").value = Math.round(temp2 * 100) / 100;//四舍五入到百分位
				}
			}
		</script>
	</form>
	<style>
		@media(prefers-color-scheme:dark) {
			body {
				background-color: #111114;
			}

			h1,
			label {
				color: white;
			}
		}

		@media(prefers-color-scheme:light) {
			body {
				background-color: whitesmoke;
			}

			h1,
			label {
				color: black;
			}
		}

		h1,
		label {
			text-align: center;
		}

		html {
			-moz-osx-font-smoothing: grayscale;
			-webkit-font-smoothing: antialiased;
			text-rendering: optimizeLegibility;
		}

		a {
			text-decoration-line: none;
		}

		a:hover {
			font-weight: bolder;
		}
	</style>
	<script>
		window.onload = function () {
			const BACKGROUNDCOLOR = ['#111114', 'whitesmoke']
			const TEXTCOLOR = ['white', 'black']
			let c = 0
			document.getElementsByTagName("h1")[0].onclick = function () {
				document.body.style.backgroundColor = BACKGROUNDCOLOR[c % 2]
				document.getElementsByTagName("h1")[0].style.color = TEXTCOLOR[c % 2]
				let x = document.getElementsByTagName("p")
				for (let i = 0; i < x.length; i++) {
					x[i].style.color = TEXTCOLOR[c % 2]
				}
				c++
			}
		}
	</script>
	<a href="qrcode.png">二维码<br></a>
</body>

</html>